FROM alpine:latest

# Install required packages
RUN apk add --no-cache ca-certificates

# Copy and extract ratel
COPY ratel_v24.1.3.tgz /tmp/
RUN tar -xzf /tmp/ratel_v24.1.3.tgz -C /usr/local/bin/ && \
    rm /tmp/ratel_v24.1.3.tgz && \
    chmod +x /usr/local/bin/ratel

# Create ratel user
RUN adduser -D -s /bin/sh ratel

USER ratel
WORKDIR /

EXPOSE 8000

ENTRYPOINT ["ratel"]